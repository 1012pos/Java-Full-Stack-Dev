20240724
0. SpringTest
1. Junit
- controller 부분
: TestController.java 참조
: MvcResult / .andReturn();
: ResultActions
: @WebMvcTest({TestController.class, TestDataController.class, ViewController.class})

- service 부분 
: Temp1ServiceTest.java 참조



================================================
[Test 방법]
2. HomeController.java
package com.app.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HomeController {
	
	@GetMapping("/")
	public String home() {
		return "home";
	}

}


3. HomeControllerTest.java
package com.app.controller;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.MvcResult;
import org.springframework.test.web.servlet.ResultActions;

@WebMvcTest(HomeController.class)
public class HomeControllerTest {
	
	@Autowired
	private MockMvc mockMvc;
	
	
	@Test
	void home() throws Exception {
		// 방법1(바로 확인하는 방법)
		ResultActions 결과1 = mockMvc.perform(get("/"));
		결과1.andExpect(status().isOk()); // 상태값 200
		
		
		// 방법2(꺼내서 확인하는 방법)
		MvcResult 결과2 = mockMvc.perform(get("/")).andReturn();
		int status = 결과2.getResponse().getStatus();
		assertThat(status).isEqualTo(200); // 밑에랑 같은것임
		assertEquals(200, status); // 위에꺼랑 같은 것임
	}

}

================================================

4. HomeControllerTest.java

	@Test
	void home2() throws Exception {
		MvcResult 결과2 = mockMvc.perform(get("/")).andReturn();
		
		// return "home";
		String viewName = 결과2.getModelAndView().getViewName();
		assertEquals("home", viewName);
	}


: getModelAndView().getViewName(), 여기서 getModelAndView(), getViewName() 둘다 메소드임

5. HomeController.java
package com.app.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HomeController {
	
	@GetMapping("/")
	public ModelAndView home(ModelAndView mav) {
		mav.setViewName("home");
		return mav;
	}
	
//	@GetMapping("/")
//	public String home() {
//		return "home";
//	}

}

6. cmd창 C:\IDE\sts-4.22.1.RELEASE\work\BootTest>gralde clean 명령어 검색
: build 삭제됨

7. cmd 창 C:\IDE\sts-4.22.1.RELEASE\work\BootTest>gradle test
: cmd 창에서 test 됨, junit과 같은 기능을 하는 명령어임

8. cmd 창 C:\IDE\sts-4.22.1.RELEASE\work\BootTest>gradle clean test bootJar
: build 삭제 후, app.jar가 생성된다.(배포 명령어)

9. cmd 창 C:\IDE\sts-4.22.1.RELEASE\work\BootTest>dir
: cmd 창 C:\IDE\sts-4.22.1.RELEASE\work\BootTest 디렉터리에 
: build가 생성된것을 알 수 있음 build는 배포되었다는 의미

10. C:\IDE\sts-4.22.1.RELEASE\work\BootTest\build\libs에 가면
: app.jar가 생성되어 있는것을 확인할 수 있다.
